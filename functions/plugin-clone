# vi: ft=zsh
emulate -L zsh; setopt local_options extended_glob no_monitor
local line repo plugdir initfile
local -a initfiles
for line in $@; do
  repo=${line%% *}
  plugdir=$ZSH_CUSTOM/.external/${repo:h:t}/${repo:t}
  initfile=$plugdir/${repo:t}.plugin.zsh
  if [[ ! -d $plugdir ]]; then
    echo "Cloning $repo..."
    git clone --quiet --depth 1 --recursive --shallow-submodules https://github.com/$repo $plugdir &
  fi
done
wait
